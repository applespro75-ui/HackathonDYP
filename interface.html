<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spark Fitness - Home</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/feather-icons"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
    body {
      background: #000;
      color: #fff;
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      margin: 0;
      padding-bottom: 60px; /* space for bottom nav */
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      padding: 0.5rem 1rem;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .glass-card:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      margin-bottom: 2rem;
    }
    header .logo-section {
      display: flex;
      align-items: center;
    }
    header .logo-circle {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(90deg, #7c3aed, #3b82f6);
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: 1rem;
    }
    h1 {
      font-size: 2rem;
      font-weight: 700;
      background: linear-gradient(90deg, #7c3aed, #3b82f6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0;
    }
    .header-buttons {
      display: flex;
      gap: 1rem;
    }
    .header-buttons a {
      text-decoration: none;
      color: inherit;
    }
    .header-buttons a .glass-card {
      width: 48px;
      height: 48px;
      justify-content: center;
      border-radius: 50%;
      padding: 0;
    }
    .bottom-tabs {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #111;
      border-top: 1px solid #333;
      display: flex;
      justify-content: space-around;
      padding: 12px 0;
      z-index: 50;
    }
    .tab-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #888;
      text-decoration: none;
      font-size: 12px;
      transition: color 0.3s ease;
    }
    .tab-btn:hover {
      color: #60a5fa; /* Tailwind blue-400 */
    }
    .tab-btn.active {
      color: #60a5fa;
    }
    .tab-btn i {
      margin-bottom: 4px;
    }
    .container {
      max-width: 640px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    /* Bento Grid Styles */
    .bento-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-gap: 1rem;
      margin-top: 1.5rem;
      grid-template-rows: auto;
    }
    .bento-item {
      padding: 1rem;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .bento-item.tall {
      grid-row: span 2;
    }
    .bento-item.wide {
      grid-column: span 2;
    }
    .bento-title {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }
    .bento-content {
      font-size: 0.875rem;
      color: #ccc;
    }
    .bento-item .flex-center {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* Chatbot Styles */
    #chatbot-container {
      position: fixed;
      bottom: 80px; /* Above the bottom navigation */
      right: 1.5rem;
      left: 1.5rem;
      max-width: 640px;
      margin: 0 auto;
      z-index: 40;
      display: none; /* Hidden by default */
    }
    #chatbot-window {
      height: 400px;
      display: flex;
      flex-direction: column;
      border-radius: 1rem;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    #chat-header {
      padding: 1rem;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }
    #chat-header h3 {
      font-size: 1.125rem;
      font-weight: 600;
      margin: 0;
    }
    #chat-messages {
      flex-grow: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .message {
      padding: 0.75rem 1rem;
      border-radius: 1rem;
      max-width: 80%;
      word-wrap: break-word;
    }
    .message.user {
      background: #3b82f6; /* Tailwind blue-500 */
      color: white;
      align-self: flex-end;
    }
    .message.ai {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      align-self: flex-start;
    }
    #chat-input-container {
      padding: 1rem;
      display: flex;
      gap: 0.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    #chat-input {
      flex-grow: 1;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      outline: none;
      color: #fff;
      padding: 0.75rem;
      border-radius: 0.75rem;
    }
    #chat-send-btn {
      background: #3b82f6;
      border: none;
      outline: none;
      color: white;
      padding: 0.75rem 1rem;
      border-radius: 0.75rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    #chat-send-btn:hover {
      background: #2563eb; /* Tailwind blue-600 */
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-section">
      <div class="logo-circle">
        <i data-feather="bolt" class="text-white"></i>
      </div>
      <h1>Spark Fitness</h1>
    </div>
    <div class="header-buttons">
      <a href="profile.html" aria-label="Profile">
        <div class="glass-card">
          <i data-feather="user"></i>
        </div>
      </a>
      <a href="settings.html" aria-label="Settings">
        <div class="glass-card">
          <i data-feather="settings"></i>
        </div>
      </a>
    </div>
  </header>

  <div class="container">
    <h2 class="text-2xl font-bold mb-2">Hello, User!</h2>
    <p class="text-sm text-gray-400">Your AI coach has prepared today's plan.</p>

    <div class="bento-grid">
      <div class="bento-item wide">
        <div class="flex flex-col">
          <span class="bento-title flex items-center gap-2"><i data-feather="award" class="w-5 h-5 text-yellow-400"></i>Today's Workout</span>
          <p class="bento-content">Full Body Strength</p>
          <div class="w-full h-2 bg-gray-700 rounded-full mt-2 overflow-hidden">
            <div class="h-full bg-blue-500 rounded-full" style="width: 75%;"></div>
          </div>
          <p class="text-xs text-gray-500 mt-1">75% Complete</p>
        </div>
        <div class="flex justify-end mt-4">
          <button class="text-xs text-blue-400 font-semibold flex items-center gap-1">Start Workout <i data-feather="arrow-right" class="w-4 h-4"></i></button>
        </div>
      </div>
      
      <div class="bento-item">
        <div class="flex-center">
          <i data-feather="droplet" class="w-8 h-8 text-blue-400"></i>
          <span class="bento-title text-center mt-2">Water Intake</span>
          <p class="bento-content text-center">3/8 Glasses</p>
        </div>
      </div>
      
      <div class="bento-item tall">
        <div class="flex-center h-full">
          <i data-feather="activity" class="w-8 h-8 text-green-400"></i>
          <span class="bento-title text-center mt-2">Weekly Goal</span>
          <p class="bento-content text-center text-green-300">On Track! ðŸš€</p>
          <p class="text-xs text-gray-500 mt-2">4/5 Workouts Done</p>
        </div>
      </div>

      <div class="bento-item wide">
        <div class="flex flex-col">
          <span class="bento-title flex items-center gap-2"><i data-feather="zap" class="w-5 h-5 text-purple-400"></i>Quick Tip</span>
          <p class="bento-content">"Hydration is key! Drink water before, during, and after your workout."</p>
        </div>
      </div>
      
      <div class="bento-item">
        <div class="flex-center">
          <i data-feather="heart" class="w-8 h-8 text-red-400"></i>
          <span class="bento-title text-center mt-2">Badges Unlocked</span>
          <p class="bento-content text-center">2 New Badges!</p>
        </div>
      </div>
    </div>
  </div>

  <div id="chatbot-container">
    <div id="chatbot-window" class="glass-card">
      <div id="chat-header" onclick="toggleChatbot()">
        <h3 class="text-blue-400">AI Coach Chat</h3>
        <i data-feather="chevron-down" class="text-gray-400"></i>
      </div>
      <div id="chat-messages">
        <div class="message ai">Hi there! How can I help you with your fitness goals today?</div>
      </div>
      <div id="chat-input-container">
        <input type="text" id="chat-input" placeholder="Ask about workouts, nutrition, and more..." />
        <button id="chat-send-btn">
          <i data-feather="send"></i>
        </button>
      </div>
    </div>
  </div>

  <nav class="bottom-tabs" role="navigation" aria-label="Main navigation">
    <a href="interface.html" class="tab-btn active" aria-current="page" aria-label="Home">
      <i data-feather="home"></i>
      <span>Home</span>
    </a>
    <a href="shedule.html" class="tab-btn" aria-label="Goals">
      <i data-feather="activity"></i>
      <span>Goals</span>
    </a>
    <a href="badge.html" class="tab-btn" aria-label="Badges">
      <i data-feather="heart"></i>
      <span>Badges</span>
    </a>
    <a href="progress.html" class="tab-btn" aria-label="Progress">
      <i data-feather="bar-chart-2"></i>
      <span>Progress</span>
    </a>
    <a href="#" class="tab-btn" aria-label="AI Coach" id="chatbot-tab-btn">
      <i data-feather="message-circle"></i>
      <span>Coach</span>
    </a>
  </nav>

  <script>
    feather.replace();

    // Chatbot Logic
    const chatbotTabBtn = document.getElementById('chatbot-tab-btn');
    const chatbotContainer = document.getElementById('chatbot-container');
    const chatInput = document.getElementById('chat-input');
    const chatSendBtn = document.getElementById('chat-send-btn');
    const chatMessages = document.getElementById('chat-messages');

    let isChatbotOpen = false;

    // Toggles chatbot visibility
    function toggleChatbot() {
      isChatbotOpen = !isChatbotOpen;
      chatbotContainer.style.display = isChatbotOpen ? 'block' : 'none';
      if (isChatbotOpen) {
        chatInput.focus();
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }
    }

    chatbotTabBtn.addEventListener('click', (e) => {
      e.preventDefault();
      toggleChatbot();
    });

    // Sends a message
    async function sendMessage() {
      const userMessage = chatInput.value.trim();
      if (userMessage === '') return;

      const userMessageElement = document.createElement('div');
      userMessageElement.classList.add('message', 'user');
      userMessageElement.textContent = userMessage;
      chatMessages.appendChild(userMessageElement);

      chatInput.value = '';
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      // PASTE YOUR API KEY HERE
      const API_KEY = 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;
      // Replace 'YOUR_API_KEY' with your actual key from Google or OpenAI.

      const prompt = `You are a fitness expert and personal trainer. A user has asked you the following question: "${userMessage}". Provide a brief, helpful, and encouraging response focused on fitness and health.`;

      try {
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            contents: [{
              parts: [{ text: prompt }]
            }]
          }),
        });

        const data = await response.json();
        const aiResponse = data.candidates[0].content.parts[0].text;

        const aiMessageElement = document.createElement('div');
        aiMessageElement.classList.add('message', 'ai');
        aiMessageElement.textContent = aiResponse;
        chatMessages.appendChild(aiMessageElement);
        chatMessages.scrollTop = chatMessages.scrollHeight;

      } catch (error) {
        console.error('Error fetching from API:', error);
        const errorMessage = 'Sorry, there was an error connecting to the AI coach.';
        const errorMessageElement = document.createElement('div');
        errorMessageElement.classList.add('message', 'ai');
        errorMessageElement.textContent = errorMessage;
        chatMessages.appendChild(errorMessageElement);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }
    }

    // Send message on button click or Enter key
    chatSendBtn.addEventListener('click', sendMessage);
    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendMessage();
      }
    });

  </script>
</body>
</html>
