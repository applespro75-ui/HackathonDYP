<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spark Fitness AI - Sign Up</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #1a202c;
            overflow-x: hidden;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .glass-morphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px) saturate(1.8);
            -webkit-backdrop-filter: blur(15px) saturate(1.8);
            border-radius: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px 0 rgba(0, 0, 0, 0.1);
        }

        @keyframes bg-pan {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .gradient-bg {
            background: linear-gradient(225deg, #000000, #0a0a0a, #0b0b0b, #151515, #0a1128, #001f3f, #0d385f);
            background-size: 400% 400%;
            animation: bg-pan 20s ease infinite;
        }

        .animated-card {
            animation: fadeIn 0.8s ease-out;
            animation-fill-mode: forwards;
        }
          try {
    const response = await fetch("https://fitness-backend.onrender.com/api/generate-plan", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ members, preferences })
    });

        
    </style>
</head>
<body class="bg-[#121212] text-white flex items-center justify-center min-h-screen">
    <div class="p-4 md:p-8 flex items-center justify-center relative w-full h-full min-h-screen">
        <div class="absolute inset-0 gradient-bg rounded-3xl m-4 md:m-8"></div>
        <div class="relative w-full max-w-md mx-auto z-10 p-4 md:p-8">
            <div id="auth-container" class="glass-morphism p-8 space-y-6 animated-card">
                <div class="flex flex-col items-center justify-center space-y-4 mb-8">
                    <a href="#" class="flex items-center space-x-2">
                        <svg class="w-10 h-10 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM12 4C13.4079 4 14.757 4.39867 15.9323 5.12261C17.1076 5.84655 18.0664 6.87707 18.6923 8.11717L12 12V4ZM12 20C10.5921 20 9.24296 19.6013 8.06771 18.8774C6.89246 18.1534 5.93361 17.1229 5.30771 15.8828L12 12L12 20ZM12 12L5.30771 8.11717C5.93361 6.87707 6.89246 5.84655 8.06771 5.12261C9.24296 4.39867 10.5921 4 12 4C13.4079 4 14.757 4.39867 15.9323 5.12261C17.1076 5.84655 18.0664 6.87707 18.6923 8.11717L12 12Z" fill="currentColor"/>
                        </svg>
                    </a>
                    <h1 class="text-3xl font-bold">Spark Fitness</h1>
                </div>

                <div id="signup-form" class="animated-form">
                    <h2 class="text-3xl font-bold mb-4">Sign Up</h2>
                    <p class="text-gray-400 mb-6">Create your account and start your wellness journey today.</p>
                    <form id="signup-form-el" class="space-y-4">
                        <div>
                            <label for="signup-email" class="sr-only">Email</label>
                            <input id="signup-email" type="email" placeholder="Email" class="w-full p-3 rounded-lg bg-white bg-opacity-10 text-white placeholder-gray-400 border border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="signup-password" class="sr-only">Password</label>
                            <input id="signup-password" type="password" placeholder="Password" class="w-full p-3 rounded-lg bg-white bg-opacity-10 text-white placeholder-gray-400 border border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="signup-phone" class="sr-only">Phone Number</label>
                            <input id="signup-phone" type="tel" placeholder="Phone Number" class="w-full p-3 rounded-lg bg-white bg-opacity-10 text-white placeholder-gray-400 border border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <button type="submit" class="w-full bg-white text-black font-semibold rounded-full px-8 py-4 shadow-lg transition-transform transform hover:scale-105 hover:shadow-xl">
                            Sign Up
                        </button>
                        <div class="my-4 text-center text-gray-500">or</div>
                        <button id="google-signup-btn" type="button" class="w-full flex items-center justify-center space-x-2 bg-blue-500 text-white font-semibold rounded-full px-8 py-4 shadow-lg transition-transform transform hover:scale-105 hover:shadow-xl">
                            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M22.56 12.238c0-.78-.069-1.533-.199-2.261H12.24v4.275h6.311a6.347 6.347 0 01-2.756 4.168v3.425h4.417c2.585-2.394 4.077-5.962 4.077-10.457z" fill="#4285F4"/><path d="M12.24 22c2.973 0 5.467-.978 7.289-2.656L15.112 15.92a7.197 7.197 0 00-2.872.63c-2.454 0-4.526-1.657-5.267-3.873H3.298v3.527A9.762 9.762 0 0012.24 22z" fill="#34A853"/><path d="M6.973 14.394c-.187-.52-.293-1.077-.293-1.666s.106-1.146.293-1.666V7.535H3.298a9.763 9.763 0 000 8.93z" fill="#FBBC05"/><path d="M12.24 4.582a5.454 5.454 0 013.882 1.518l3.44-3.44A9.762 9.762 0 0012.24 2c-4.965 0-9.155 3.99-9.155 9.176h3.676c.741-2.216 2.813-3.873 5.267-3.873z" fill="#EA4335"/></svg>
                            <span>Sign up with Google</span>
                        </button>
                        <p class="text-center text-gray-400">
                            Already have an account? <a href="login.html" class="text-blue-400 hover:underline">Log in</a>
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithCustomToken, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCyMUrKQNX6-clW4wsaDiDeGC4HRdJfvrE",
            authDomain: "hackathon-app-c790e.firebaseapp.com",
            projectId: "hackathon-app-c790e",
            storageBucket: "hackathon-app-c790e.firebasestorage.app",
            messagingSenderId: "563910612296",
            appId: "1:563910612296:web:103b49f5874e62c4928f7d",
            measurementId: "G-GJX9RZNG16"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const authContainer = document.getElementById('auth-container');
        const signupFormEl = document.getElementById('signup-form-el');
        const googleSignupBtn = document.getElementById('google-signup-btn');

        const showMessage = (message, isError = false) => {
            let msgBox = document.createElement('div');
            msgBox.textContent = message;
            msgBox.className = "text-center p-3 rounded-lg text-white font-medium my-4";
            msgBox.style.backgroundColor = isError ? 'rgba(255, 0, 0, 0.2)' : 'rgba(0, 255, 0, 0.2)';
            authContainer.appendChild(msgBox);
            setTimeout(() => {
                authContainer.removeChild(msgBox);
            }, 5000);
        };

        signupFormEl.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = signupFormEl['signup-email'].value;
            const password = signupFormEl['signup-password'].value;
            const phone = signupFormEl['signup-phone'].value;

            try {
                // 1. Create user in Auth
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // 2. Save extra info in Firestore
                await setDoc(doc(db, "users", user.uid), {
                    email: email,
                    phone: phone,
                    createdAt: serverTimestamp()
                });

                showMessage('Account created successfully!', false);
                
                // Redirect to the login page after a short delay
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 2000); // 2-second delay

            } catch (error) {
                showMessage(error.message, true);
            }
        });

        const handleGoogleSignIn = () => {
            showMessage("Google Sign-in functionality would be implemented here. This requires a pop-up and cannot be fully demonstrated in this environment.", false);
        };

        googleSignupBtn.addEventListener('click', handleGoogleSignIn);
    </script>
</body>
</html>
